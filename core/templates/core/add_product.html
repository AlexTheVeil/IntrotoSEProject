{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
  body {
    background-color: #f9f9f9;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .form-container {
    max-width: 700px;
    margin: 60px auto;
    background: #fff;
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
  }
  h2 {
    text-align: center;
    margin-bottom: 30px;
    font-weight: 600;
    color: #333;
  }
  .btn-primary {
    background-color: #007bff;
    border: none;
    transition: all 0.2s ease;
  }
  .btn-primary:hover {
    background-color: #0056b3;
  }
  .success-message {
    text-align: center;
    color: green;
    font-weight: bold;
  }
</style>

<div class="form-container">
  <h2>Add New Product</h2>

  {% if messages %}
    {% for message in messages %}
      <p class="success-message">{{ message }}</p>
    {% endfor %}
  {% endif %}

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
      {{ form.as_p }}
    </div>
    <button type="submit" class="btn btn-primary btn-block">Save Product</button>
  </form>

  <hr>
  <h4>All Products (Database Preview)</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Title</th>
        <th>Price</th>
        <th>Category</th>
        <th>Image</th>
        <th>Created</th>
      </tr>
    </thead>
    <tbody>
      {% for p in products %}
      <tr>
        <td>{{ p.title }}</td>
        <td>${{ p.price }}</td>
        <td>{{ p.category }}</td>
        <td><img src="{{ p.image.url }}" width="60"></td>
        <td>{{ p.date|date:"Y-m-d H:i" }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="5" style="text-align:center;">No products yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
