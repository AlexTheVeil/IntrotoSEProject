{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container" style="max-width: 900px; margin: 50px auto;">
  <h1 style="text-align:center;">Product Search</h1>

  <form method="get" action="." style="margin-top:20px; text-align:center;">
    <input type="text" name="q" value="{{ query|default:'' }}" placeholder="Search for products..." style="width: 60%; padding: 10px;">
    <button type="submit" style="padding: 10px 20px;">Search</button>
  </form>

  <div style="margin-top: 40px;">
    {% if products %}
      <h2>Results:</h2>
      <ul style="list-style: none; padding: 0;">
        {% for product in products %}
          <li style="margin-bottom: 20px; border: 1px solid #ccc; padding: 15px; border-radius: 8px;">
            <h3>{{ product.title }}</h3>
            <p>{{ product.description|truncatewords:20 }}</p>
            <p><strong>Price:</strong> ${{ product.price }}</p>
            <p>ID: {{ product.pid }}</p>
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.title }}" style="max-height: 150px;">
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No products found.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
